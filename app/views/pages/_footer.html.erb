<% unless hidden %>

<% if page.ref_link.present? %>
  <div class="mt-3 flex justify-end w-full"><a data-turbo="false" class="flex text-sky-600 underline gap-1 items-center" href="<%= page.ref_link %>">Reference Wedsite <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.607 11.035v7.929a2.272 2.272 0 0 1-2.3 2.286H5.05a2.272 2.272 0 0 1-2.299-2.3V7.693a2.273 2.273 0 0 1 2.3-2.3h7.928M21.25 2.75L10.679 13.321M15.964 2.75h5.286v5.286"/></svg></a></div>
<% end %>

<% if page.ref_text.present? %>
  <div class="mt-3 flex justify-end w-full"><a data-turbo="false" class="flex text-sky-600 underline gap-1 items-center" href="/<%= page.language.name %>/wiki/<%= page.title %>/ref.txt">Reference Text <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M18.607 11.035v7.929a2.272 2.272 0 0 1-2.3 2.286H5.05a2.272 2.272 0 0 1-2.299-2.3V7.693a2.273 2.273 0 0 1 2.3-2.3h7.928M21.25 2.75L10.679 13.321M15.964 2.75h5.286v5.286"/></svg></a></div>
<% end %>

<div class="mt-10 text-center font-bold">Is this page incorrect?</div>
<div class="flex flex-col gap-4 justify-center items-center mt-5">
  <%= form_with(url: update_page_path(lang: page.language.name, id: page.id), id: "submit") do |form| %>
    <%= form.hidden_field :reset, value: "1" %>
    <div class="flex border rounded-lg">
      <%= form.text_field :url, class: "w-full max-w-[270px] rounded-s-lg border-none focus:ring-0 focus:outline-none", placeholder: "Reference URL" %>
      <%= form.button type: :submit, class: "rounded-e-lg bg-[#117469] border-[0.5px] border-sltate-300 px-5 py-2 inline-flex gap-2 hover:opacity-80 text-white" do %>
        <span class="flex items-center gap-1">
          Correct
        </span>
      <% end %>
    </div>
  <% end %>
</div>

<div class="flex flex-col gap-4 justify-center items-center pt-10 max-w-[270px] mx-auto">
  <%= form_with(url: update_page_path(lang: page.language.name, id: page.id), id: "submit", data: { controller: "pdf-upload" }, class: "w-full") do |form| %>
    <div class="flex items-center justify-center w-full">
      <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-t-lg cursor-pointer bg-gray-50 dark:hover:bg-gray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 ">
        <div class="flex flex-col items-center justify-center pt-5 pb-6">
          <svg class="w-8 h-8 mb-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
          </svg>
          <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span></p>
          <p class="text-xs text-gray-500 dark:text-gray-400">PDF</p>
        </div>
        <%= form.file_field :pdf, id:"dropzone-file", class: "hidden", accept:".pdf", data: { action: "pdf-upload#enable" } %>
      </label>
    </div>
    <%= form.hidden_field :reset, value: "1" %>
    <%= form.button type: :submit, data: { pdf_upload_target: "button" }, disable: true, class: "w-full justify-center opacity-40 bg-[#117469] text-white rounded-b-lg border-[#117469] items-center border px-5 py-2 inline-flex gap-2" do %>
      <span class="">Correct</span>
    <% end %>
  <% end %>
</div>

<div class="py-[40px] grid gap-4 grid-cols-2">
  <% page.sources.each do |source| %>
    <% if source.id != page.id %>
      <%= render partial: "pages/relation", locals: { page: source } %>
    <% end %>
  <% end %>
  <% page.destinations.each do |destination| %>
    <% if destination.id != page.id %>
      <%= render partial: "pages/relation", locals: { page: destination } %>
    <% end %>
  <% end %>
</div>

<% end %>
